{"version":3,"file":"avl.es6.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["import { Node, PrintCallback } from './types'\n\n/** Default comparison function */\nexport function DEFAULT_COMPARE<K = unknown>(a: K, b: K): number {\n    return a > b ? 1 : a < b ? -1 : 0\n}\n\n/** Single left rotation */\nexport function rotateLeft<K = unknown, V = unknown>(\n    node: Node<K, V>,\n): Node<K, V> | undefined {\n    const rightNode = node.right\n    if (!rightNode) return\n    node.right = rightNode.left\n\n    if (rightNode.left) rightNode.left.parent = node\n\n    rightNode.parent = node.parent\n    if (rightNode.parent) {\n        if (rightNode.parent.left === node) {\n            rightNode.parent.left = rightNode\n        } else {\n            rightNode.parent.right = rightNode\n        }\n    }\n\n    node.parent = rightNode\n    rightNode.left = node\n\n    node.balanceFactor += 1\n    if (rightNode.balanceFactor < 0) {\n        node.balanceFactor -= rightNode.balanceFactor\n    }\n\n    rightNode.balanceFactor += 1\n    if (node.balanceFactor > 0) {\n        rightNode.balanceFactor += node.balanceFactor\n    }\n    return rightNode\n}\n\nexport function rotateRight<K = unknown, V = unknown>(\n    node: Node<K, V>,\n): Node<K, V> | undefined {\n    const leftNode = node.left\n    if (!leftNode) return\n    node.left = leftNode.right\n    if (node.left) node.left.parent = node\n\n    leftNode.parent = node.parent\n    if (leftNode.parent) {\n        if (leftNode.parent.left === node) {\n            leftNode.parent.left = leftNode\n        } else {\n            leftNode.parent.right = leftNode\n        }\n    }\n\n    node.parent = leftNode\n    leftNode.right = node\n\n    node.balanceFactor -= 1\n    if (leftNode.balanceFactor > 0) {\n        node.balanceFactor -= leftNode.balanceFactor\n    }\n\n    leftNode.balanceFactor -= 1\n    if (node.balanceFactor < 0) {\n        leftNode.balanceFactor += node.balanceFactor\n    }\n\n    return leftNode\n}\n\n/** Print tree horizontally */\nexport function print<K = unknown, V = unknown>(\n    root: Node<K, V> | undefined,\n    printNode: PrintCallback<K, V> = (node: Node<K, V>) => String(node.key),\n): string {\n    const out: Array<string> = []\n    row(root, '', true, (v) => out.push(v), printNode)\n    return out.join('')\n}\n\n/** Print level of the tree */\nfunction row<K = unknown, V = unknown>(\n    root: Node<K, V> | undefined,\n    prefix: string,\n    isTail: boolean,\n    out: (xin: string) => void,\n    printNode: PrintCallback<K, V>,\n) {\n    if (root) {\n        out(`${prefix}${isTail ? '└── ' : '├── '}${printNode(root)}\\n`)\n        const indent = prefix + (isTail ? '    ' : '│   ')\n        if (root.left) row(root.left, indent, false, out, printNode)\n        if (root.right) row(root.right, indent, true, out, printNode)\n    }\n}\n\n/**\n * Is the tree balanced (none of the subtrees differ in height by more than 1)\n */\nexport function isBalanced<K = unknown, V = unknown>(\n    root: Node<K, V> | undefined,\n): boolean {\n    if (!root) return true // If node is empty then return true\n\n    // Get the height of left and right sub trees\n    const lh = height(root.left)\n    const rh = height(root.right)\n\n    if (\n        Math.abs(lh - rh) <= 1 &&\n        isBalanced(root.left) &&\n        isBalanced(root.right)\n    ) {\n        return true\n    }\n\n    // If we reach here then tree is not height-balanced\n    return false\n}\n\n/**\n * Compute the 'height' of a tree.\n * Height is the number of nodes along the longest path\n * from the root node down to the farthest leaf node.\n */\nfunction height<K = unknown, V = unknown>(\n    node: Node<K, V> | undefined,\n): number {\n    return node ? 1 + Math.max(height(node.left), height(node.right)) : 0\n}\n\nexport function loadRecursive<K = unknown, V = unknown>(\n    parent: Node<K, V> | undefined,\n    keys: K[],\n    values: V[],\n    start: number,\n    end: number,\n) {\n    const size = end - start\n    if (size > 0) {\n        const middle = start + Math.floor(size / 2)\n        const key = keys[middle]\n        const data = values[middle]\n        const node: Node<K, V> = { key, data, parent, balanceFactor: 0 }\n        node.left = loadRecursive(node, keys, values, start, middle)\n        node.right = loadRecursive(node, keys, values, middle + 1, end)\n        return node\n    }\n}\n\nexport function markBalance<K = unknown, V = unknown>(\n    node: Node<K, V> | undefined,\n): number {\n    if (!node) return 0\n    const lh = markBalance(node.left)\n    const rh = markBalance(node.right)\n\n    node.balanceFactor = lh - rh\n    return Math.max(lh, rh) + 1\n}\n\nexport function sort<K = unknown, V = unknown>(\n    keys: Array<K>,\n    values: Array<V>,\n    left: number,\n    right: number,\n    compare: (a: K, b: K) => number,\n) {\n    if (left >= right) return\n\n    // eslint-disable-next-line no-bitwise\n    const pivot = keys[(left + right) >> 1]\n    let i = left - 1\n    let j = right + 1\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        do i++\n        while (compare(keys[i], pivot) < 0)\n        do j--\n        while (compare(keys[j], pivot) > 0)\n        if (i >= j) break\n\n        const tmpK: K = keys[i]\n        keys[i] = keys[j]\n        keys[j] = tmpK\n\n        const tmpV: V = values[i]\n        values[i] = values[j]\n        values[j] = tmpV\n    }\n\n    sort(keys, values, left, j, compare)\n    sort(keys, values, j + 1, right, compare)\n}\n","import {\n    BareNode,\n    Comparator,\n    ForEachCallback,\n    Node,\n    TraverseCallback,\n} from './types'\nimport {\n    DEFAULT_COMPARE,\n    isBalanced,\n    loadRecursive,\n    markBalance,\n    print,\n    rotateLeft,\n    rotateRight,\n    sort,\n} from './utils'\n\nclass AVLTree<K, V> {\n    private _comparator: Comparator<K>\n    private _root: Node<K, V> | undefined\n    private _size = 0\n    private _noDuplicates: boolean\n\n    constructor(comparator?: Comparator<K>, noDuplicates = false) {\n        this._comparator = comparator || DEFAULT_COMPARE\n        this._noDuplicates = !!noDuplicates\n    }\n\n    /** Number of nodes */\n    get size(): number {\n        return this._size\n    }\n\n    /** Clear the tree */\n    clear(): AVLTree<K, V> {\n        delete this._root\n        this._size = 0\n        return this\n    }\n\n    /** Clear the tree (alias for `clear`) */\n    destroy(): AVLTree<K, V> {\n        return this.clear()\n    }\n\n    /** Check if tree contains a node with the given key */\n    contains(key: K): boolean {\n        if (this._root) {\n            let node: Node<K, V> | undefined = this._root\n            const comparator = this._comparator\n            while (node) {\n                const cmp = comparator(key, node.key)\n                if (cmp === 0) return true\n                else if (cmp < 0) node = node.left\n                else node = node.right\n            }\n        }\n        return false\n    }\n\n    /**\n     * Execute `callback` on every node of the tree, in order.\n     * Return a 'truthy' value from `callback` to stop the iteration.\n     */\n    forEach(callback: ForEachCallback<K, V>): AVLTree<K, V> {\n        let current: Node<K, V> | undefined = this._root\n        const s: Array<Node<K, V>> = []\n        let done: boolean | undefined = false\n        let i = 0\n        while (!done) {\n            // Reach the left most Node of the current Node\n            if (current) {\n                // Place pointer to a tree node on the stack\n                // before traversing the node's left subtree\n                s.push(current)\n                current = current.left\n            } else {\n                // Backtrack from the empty subtree and visit the Node\n                // at the top of the stack; however, if the stack is\n                // empty you are done\n                if (s.length > 0) {\n                    current = s.pop() as Node<K, V>\n                    done = !!callback(current, i++)\n                    // We have visited the node and its left\n                    // subtree. Now, it is the right subtree's turn\n                    current = current.right\n                } else {\n                    done = true\n                }\n            }\n        }\n        return this\n    }\n\n    /** Walk key range from `low` to `high`. Stop if `fn` returns a value. */\n    range(\n        low: K,\n        high: K,\n        fn: TraverseCallback<K, V>,\n        ctx?: unknown,\n    ): AVLTree<K, V> {\n        const Q: Array<Node<K, V>> = []\n        const compare = this._comparator\n        let node = this._root\n        let cmp: number\n        while (Q.length !== 0 || node) {\n            if (node) {\n                Q.push(node)\n                node = node.left\n            } else {\n                node = Q.pop() as Node<K, V>\n                cmp = compare(node.key, high)\n                if (cmp > 0) {\n                    break\n                } else if (compare(node.key, low) >= 0) {\n                    if (fn.call(ctx, node)) {\n                        // stop if something is returned\n                        return this\n                    }\n                }\n                node = node.right\n            }\n        }\n        return this\n    }\n\n    /** Array of all keys, in order */\n    keys(): Array<K> {\n        const r: Array<K> = []\n        this.forEach((node) => {\n            r.push(node.key as K)\n        })\n        return r\n    }\n\n    /** Array of `data` field values of all nodes, in order */\n    values(): Array<V> {\n        const r: Array<V> = []\n        this.forEach((node) => {\n            r.push(node.data as V)\n        })\n        return r\n    }\n\n    /** Return node at given `index` */\n    at(index: number): Node<K, V> | undefined {\n        let r: Node<K, V> | undefined\n        this.forEach((node, i) => {\n            if (i === index) return (r = node)\n        })\n        return r\n    }\n\n    /** Return node with the minimum key */\n    minNode(): Node<K, V> | undefined {\n        let node = this._root\n        if (!node) return\n        while (node.left) {\n            node = node.left\n        }\n        return node\n    }\n\n    /** Return node with the maximum key */\n    maxNode(): Node<K, V> | undefined {\n        let node = this._root\n        if (!node) return\n        while (node.right) {\n            node = node.right\n        }\n        return node\n    }\n\n    /** Return the minimum key */\n    min(): K | undefined {\n        const node = this.minNode()\n        if (!node) return\n        return node.key\n    }\n\n    /** Return the maximum key */\n    max(): K | undefined {\n        const node = this.maxNode()\n        if (!node) return\n        return node.key\n    }\n\n    /** Return true if tree is empty */\n    isEmpty(): boolean {\n        return !this._root\n    }\n\n    /** Remove (and return) the node with minimum key */\n    pop(): BareNode<K, V> | undefined {\n        let node = this._root\n        let returnValue: BareNode<K, V> | undefined\n        if (node) {\n            while (node.left) {\n                node = node.left\n            }\n            returnValue = { key: node.key, data: node.data }\n            this.remove(node.key)\n        }\n        return returnValue\n    }\n\n    /** Remove (and return) the node with maximum key */\n    popMax(): BareNode<K, V> | undefined {\n        let node = this._root\n        let returnValue: BareNode<K, V> | undefined\n        if (node) {\n            while (node.right) {\n                node = node.right\n            }\n            returnValue = { key: node.key, data: node.data }\n            this.remove(node.key)\n        }\n        return returnValue\n    }\n\n    /** Find node by key */\n    find(key: K): Node<K, V> | undefined {\n        let subtree = this._root\n        let cmp: number\n        const compare = this._comparator\n        while (subtree) {\n            cmp = compare(key, subtree.key)\n            if (cmp === 0) return subtree\n            else if (cmp < 0) subtree = subtree.left\n            else subtree = subtree.right\n        }\n    }\n\n    /** Insert a node into the tree */\n    insert(key: K, data?: V): Node<K, V> | undefined {\n        if (!this._root) {\n            this._root = {\n                parent: undefined,\n                left: undefined,\n                right: undefined,\n                balanceFactor: 0,\n                key,\n                data,\n            }\n            this._size++\n            return this._root\n        }\n\n        const compare = this._comparator\n        let node: Node<K, V> | undefined = this._root\n        let parent: Node<K, V> | undefined = this._root\n        let cmp = 0\n\n        if (this._noDuplicates) {\n            while (node) {\n                cmp = compare(key, node.key)\n                parent = node\n                if (cmp === 0) return\n                else if (cmp < 0) node = node.left\n                else node = node.right\n            }\n        } else {\n            while (node) {\n                cmp = compare(key, node.key)\n                parent = node\n                if (cmp <= 0) node = node.left\n                else node = node.right\n            }\n        }\n\n        const newNode: Node<K, V> = {\n            left: undefined,\n            right: undefined,\n            balanceFactor: 0,\n            parent,\n            key,\n            data,\n        }\n        let newRoot: Node<K, V> | undefined\n        if (cmp <= 0) parent.left = newNode\n        else parent.right = newNode\n\n        while (parent) {\n            cmp = compare(parent.key, key)\n            if (cmp < 0) parent.balanceFactor -= 1\n            else parent.balanceFactor += 1\n\n            if (parent.balanceFactor === 0) {\n                break\n            } else if (parent.balanceFactor < -1) {\n                if (parent.right?.balanceFactor === 1) {\n                    rotateRight(parent.right)\n                }\n                newRoot = rotateLeft(parent)\n                if (parent === this._root) {\n                    this._root = newRoot\n                }\n                break\n            } else if (parent.balanceFactor > 1) {\n                if (parent.left?.balanceFactor === -1) {\n                    rotateLeft(parent.left)\n                }\n                newRoot = rotateRight(parent)\n                if (parent === this._root) {\n                    this._root = newRoot\n                }\n                break\n            }\n            parent = parent.parent\n        }\n\n        this._size++\n        return newNode\n    }\n\n    /** Remove the node from the tree. */\n    remove(key: K | undefined): K | undefined {\n        if (!this._root || !key) return\n        let node: Node<K, V> | undefined = this._root\n        const compare = this._comparator\n        let cmp = 0\n\n        // Start at the root, advance down the tree checking for a match.\n        while (node) {\n            cmp = compare(key, node.key)\n            if (cmp === 0) break\n            // found it!\n            else if (cmp < 0) node = node.left\n            else node = node.right\n        }\n        // If we reached the end of the tree, the key is not in the tree.\n        if (!node) return\n\n        const returnValue = node.key\n        let max: Node<K, V>\n        let min: Node<K, V>\n\n        if (node.left) {\n            max = node.left\n\n            while (max.left || max.right) {\n                while (max.right) {\n                    max = max.right\n                }\n                node.key = max.key\n                node.data = max.data\n                if (max.left) {\n                    node = max\n                    max = max.left\n                }\n            }\n\n            node.key = max.key\n            node.data = max.data\n            node = max\n        }\n\n        if (node.right) {\n            min = node.right\n\n            while (min.left || min.right) {\n                while (min.left) {\n                    min = min.left\n                }\n                node.key = min.key\n                node.data = min.data\n                if (min.right) {\n                    node = min\n                    min = min.right\n                }\n            }\n\n            node.key = min.key\n            node.data = min.data\n            node = min\n        }\n\n        let parent: Node<K, V> | undefined = node.parent\n        let pp: Node<K, V> | undefined = node\n        let newRoot: Node<K, V> | undefined\n\n        while (parent) {\n            if (parent.left === pp) parent.balanceFactor -= 1\n            else parent.balanceFactor += 1\n\n            if (parent.balanceFactor < -1) {\n                if (parent.right?.balanceFactor === 1) {\n                    rotateRight(parent.right)\n                }\n                newRoot = rotateLeft(parent)\n                if (parent === this._root) {\n                    this._root = newRoot\n                }\n                parent = newRoot\n            } else if (parent.balanceFactor > 1) {\n                if (parent.left?.balanceFactor === -1) {\n                    rotateLeft(parent.left)\n                }\n                newRoot = rotateRight(parent)\n                if (parent === this._root) {\n                    this._root = newRoot\n                }\n                parent = newRoot\n            }\n\n            if (parent?.balanceFactor === -1 || parent?.balanceFactor === 1) {\n                break\n            }\n            pp = parent\n            parent = parent?.parent\n        }\n\n        if (node.parent) {\n            if (node.parent.left === node) {\n                delete node.parent.left\n            } else {\n                delete node.parent.right\n            }\n        }\n\n        if (node === this._root) {\n            delete this._root\n        }\n\n        this._size--\n        return returnValue\n    }\n\n    /** Bulk-load items (into an empty tree only) */\n    load(keys: Array<K> = [], values: Array<V> = [], presort?: boolean) {\n        if (this._size !== 0) throw new Error('bulk-load: tree is not empty')\n        const size = keys.length\n        if (presort) sort(keys, values, 0, size - 1, this._comparator)\n        this._root = loadRecursive(undefined, keys, values, 0, size)\n        markBalance(this._root)\n        this._size = size\n        return this\n    }\n\n    /** A tree is 'balanced' if none of the subtrees differ in height by more than 1 */\n    isBalanced() {\n        return isBalanced(this._root)\n    }\n\n    /** String representation of the tree - primitive horizontal print-out */\n    toString(printNode?: (node: Node<K, V>) => string) {\n        return print(this._root, printNode)\n    }\n\n    /** Successor node */\n    static next<K = unknown, V = unknown>(\n        node: Node<K, V>,\n    ): Node<K, V> | undefined {\n        let successor: Node<K, V> | undefined = node\n        if (successor) {\n            if (successor.right) {\n                successor = successor.right\n                while (successor.left) successor = successor.left\n            } else {\n                successor = node.parent\n                while (successor && successor.right === node) {\n                    node = successor\n                    successor = successor.parent\n                }\n            }\n        }\n        return successor\n    }\n\n    /** Predecessor node */\n    static prev<K = unknown, V = unknown>(\n        node: Node<K, V>,\n    ): Node<K, V> | undefined {\n        let predecessor: Node<K, V> | undefined = node\n        if (predecessor) {\n            if (predecessor.left) {\n                predecessor = predecessor.left\n                while (predecessor.right) predecessor = predecessor.right\n            } else {\n                predecessor = node.parent\n                while (predecessor && predecessor.left === node) {\n                    node = predecessor\n                    predecessor = predecessor.parent\n                }\n            }\n        }\n        return predecessor\n    }\n}\n\nexport default AVLTree\n"],"names":[],"mappings":"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"}